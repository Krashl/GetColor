
  //файл конфигурации
  "name": "Take colors from the site",                //название
  "description": "Находит цветовую палитру с сайта",  //описание
  "version": "1.0",                   //версия расширения
  "manifest_version":2,             //описание версии
  "page_action" : { "default_popup" : "popup.html" },
  "default_icon": {
    "16": "images/get_started16.png",
    "32": "images/get_started32.png",
    "48": "images/get_started48.png",
    "128": "images/get_started128.png"
  },
  "content_scripts": [
    {
      "matches": ["<all_urls>"],    //сайты на которых будет работать
      "js": ["script.js"],          //файл с кодом
      "run_at": "document_end"      //параметр для запуска расширения
    }
  ]
}























"use strict";


const allElements = document.querySelectorAll('*'),     //выбрали все элеменеты на странице
      text = ['a', 'abbr', 'address', 'area', 'article', 
      'b', 'bdi', 'bdo', 'p', 'h1', 'h2', 'h3', 'h4', 'h5',
      'h6', 'span', 'ul', 'ol', 'li'],
      blok = ['input', 'div', 'table', 'tr', 'tb', 'th',
      'textarea', 'form'];



function getColor(event) {                              //событие для выбора цвете при клике на элемент
    let pageColors = [];                                //массив в котором будут хранится цвета 
    div.innerHTML = '';
    event.preventDefault();                             //отключаем возможность перехода на другие страницы при клике
    let styleElement = getComputedStyle(event.target);  //объявляем переменную, в которую помещаем весь стиль нажатого элемента
    
    //проверки на пустой результат
    // if (event.backgroundColor) {

    // }
    // pageColors[0] = styleElement.backgroundColor;
    // console.log((event.target.nodeName));
    let index = 0;
    let chekType = 0;                                   //проверка выполнения условий
    if (chekType == 0) {
        for (let item of text) {
            if (event.target.nodeName == item.toUpperCase()) {
                if (!(styleElement.color == 'rgba(0, 0, 0, 0)')) {
                    pageColors[index] = styleElement.color;
                    index++;
                    console.log(styleElement.color);
                }
                chekType++;         //изменяем проверку, чтобы не пойти в следующий массив
                break;
            }
        }
    }
    if (chekType == 0) {
        for (let item of blok) {
            if (event.target.nodeName == item.toUpperCase()) {
                if (!(styleElement.backgroundColor == 'rgba(0, 0, 0, 0)')) {
                    pageColors[index] = styleElement.backgroundColor;
                    index++;
                    console.log(styleElement.backgroundColor);
                }
                if (!(styleElement.background.slice(0, styleElement.background.indexOf(')')+1) == 'rgba(0, 0, 0, 0)')) {
                    pageColors[index] = styleElement.background.slice(0, styleElement.background.indexOf(')')+1);
                    index++;
                    console.log(styleElement.background.slice(0, styleElement.background.indexOf(')')+1));
                }
                if (!(styleElement.color == 'rgba(0, 0, 0, 0)')) {
                    pageColors[index] = styleElement.color;
                    index++;
                    console.log(styleElement.color);
                }
                chekType++;         //изменяем проверку, чтобы не пойти в следующий массив
                break;
            }
        }
    }
    if (chekType == 0) {
            if (!(styleElement.backgroundColor == 'rgba(0, 0, 0, 0)')) {
                pageColors[index] = styleElement.backgroundColor;
                index++;
                console.log(styleElement.backgroundColor);
            }
            if (!(styleElement.background.slice(0, styleElement.background.indexOf(')')+1) == 'rgba(0, 0, 0, 0)')) {
                pageColors[index] = styleElement.background.slice(0, styleElement.background.indexOf(')')+1);
                index++;
                console.log(styleElement.background.slice(0, styleElement.background.indexOf(')')+1));
            }
            if (!(styleElement.color == 'rgba(0, 0, 0, 0)')) {
                pageColors[index] = styleElement.color;
                index++;
                console.log(styleElement.color);
            }
        }
    chekType = 0;


    pageColors.forEach( item => {
        const colorDiv = document.createElement('div');
        colorDiv.style.height = `10px`;
        colorDiv.style.width = `10px`;
        colorDiv.style.margin = `5px`;
        colorDiv.style.backgroundColor = item;
        // colorDiv.textContent =  item;
        div.append(colorDiv);
    });
    div.style.top = `${event.clientY}px`;
    div.style.left = `${event.clientX}px`;
    document.body.append(div);

    event.stopPropagation();                          //запрещаем всплытие событий
    console.log(event);
}

const div = document.createElement('div');
div.id = 'leooPopov';
div.style.backgroundColor = `red`;
// div.style.margin = `7px`;
// div.style.width = `10px`;
// div.style.height = `10px`;
// div.style.padding = `10px`;
div.style.border = `4px solid black`;
div.style.background = `#fc0`;
div.style.position = `absolute`;
div.style.top = `82px`;
div.style.zIndex = `1000000`;
// div.textContent =  '123';
// document.body.append(div);
// div.remove();



allElements.forEach( item => {                          //назначаем всем элементам страницы прослушивание события
    item.addEventListener('click', getColor);           //вызфваем функцию при клике на любой элемент 
});






















// const all = document.querySelectorAll('*');

// let colors = [];
// let i = 0;

// function getColor(event) {
//     event.preventDefault();
//     // console.log(event.currentTarget);
//     // console.log(getComputedStyle(event.target).backgroundColor);
//     // console.log(getComputedStyle(event.target).background);
//     // console.log(getComputedStyle(event.target).color);
//     // alert(event.currentTarget);\
//     let element = getComputedStyle(event.target);
//         if (!(element.backgroundColor == 'rgba(0, 0, 0, 0)')) {
//             colors[i] = element.backgroundColor;
//             console.log(colors[i]);
//             i++;
//         }
//         if (!(element.background == '' && element.background == null && element.background == 'rgba(0, 0, 0, 0)' && element.background == 'rgb(0, 0, 0)')) {
//             colors[i] = element.background;
//             console.log(colors[i]);
//             i++;
//         }
//         if (!(element.color == '' && element.color == null && element.color == 'rgba(0, 0, 0, 0)' && element.color == 'rgb(0, 0, 0)')) {
//             colors[i] = element.color;
//             console.log(colors[i]);
//             i++;
//         }
//     event.stopPropagation();
// }

// all.forEach( item => {
//     item.addEventListener('click', getColor);
// });